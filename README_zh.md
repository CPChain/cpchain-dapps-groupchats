# CPChain 群聊天

群聊天功能为 CPChain 基金会完全基于 CPChain 主链开发。用户可通过群聊天在 CPChain 主链上自发形成社区。所有消息均通过对称密钥进行加密，最大限度保障信息安全。

群分为公开群和私有群两种。

公开群：群主创建AES 密钥，使用自己在 Identity 上的私钥进行加密，创建群（群名称、使用JSON 序列化的相关信息，加密后的 AES 密钥，设置加入群是否需要群主同意）；用户需要加入群时，获取该群群主的公钥，用公钥解密 AES 密钥，使用 AES 密钥加密消息。用户调用加入群方法（Join，指定群名称），即可加入群（若无需群主同意则直接进入，否则需等群主同意）。发出的事件需包括块号。

私有群：群主创建群时不设置 AES 密钥，自行去拉取其他人，直接通过加密聊天发送”入群邀请“消息，消息包含群ID、AES 密钥等信息，接收邀请时需调用群聊天 Join 合约。
